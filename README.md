# üß® GSB E-Commerce Backend

Bienvenue dans le backend du projet **GSB E-Commerce**, une application d√©velopp√©e avec **Spring Boot** c√¥t√© back pour la gestion d'une plateforme de commerce √©lectronique.

---

## **Technologies et Frameworks Utilis√©s**

- üñ•Ô∏è **Spring Web** : Framework pour la cr√©ation d'API RESTful.


- üóÑÔ∏è **Spring JDBC** : Gestion des interactions avec la base de donn√©es MySQL.


- üîí **Spring Security** : Impl√©mentation de la s√©curit√© pour l'authentification et l'autorisation via JWT.


- üõ†Ô∏è **MySQL Drivers** : Pilote JDBC pour la connexion √† une base de donn√©es MySQL.


- üì¶ **Docker** : Conteneurisation pour le d√©ploiement. Non fonctionnelle sur la v1 du projet


---

## üìÇ **Architecture du Projet**
```plaintext
com.gsb.gsbecommercebackend
‚îú‚îÄ‚îÄ üìÅ authentication                  # Gestion de la s√©curit√© et de l'authentification JWT
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ config
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìù SecurityConfig.java         # Configuration de Spring Security (authentification, autorisations)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìù CorsConfig.java             # D√©claration des r√®gles CORS globales
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìù CustomCorsFilter.java       # Filtre personnalis√© pour affiner les r√®gles CORS
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ filter
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìù JwtAuthenticationFilter.java # Interception des requ√™tes pour authentifier via JWT
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ dto
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìù AuthRequest.java            # DTO pour encapsuler les donn√©es de login
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ service
‚îÇ       ‚îú‚îÄ‚îÄ üìù JwtService.java             # G√©n√©ration, validation et parsing des tokens JWT

‚îú‚îÄ‚îÄ üìÅ config                          # Autres configurations transversales
‚îÇ   ‚îú‚îÄ‚îÄ üìù CorsConfig.java                # Fichier de config global pour CORS
‚îÇ   ‚îú‚îÄ‚îÄ üìù CustomCorsFilter.java          # Impl√©mentation d‚Äôun filtre sp√©cifique

‚îú‚îÄ‚îÄ üìÅ constant                       # Constantes globales du projet
‚îÇ   ‚îú‚îÄ‚îÄ üìù AppConstants.java              # Cl√©s, cha√Ænes r√©utilisables
‚îÇ   ‚îú‚îÄ‚îÄ üìù OrdersConstant.java            # Constantes sp√©cifiques aux commandes

‚îú‚îÄ‚îÄ üìÅ controller                     # Couche contr√¥leur (REST API)
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ deliveryAddress
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìù DeliveryAddressController.java # Contr√¥leur pour les adresses de livraison
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ orders
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìù OrderAnalyticsController.java  # Statistiques/rapports sur les commandes
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìù OrderCRUDController.java       # CRUD des commandes
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ products
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìù ProductAnalyticsController.java # Statistiques sur les produits
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìù ProductCRUDController.java      # CRUD des produits
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ roles
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìù RolesController.java            # Endpoints pour la gestion des r√¥les
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ users
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìù UsersAnalyticsController.java   # Statistiques sur les utilisateurs
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìù UsersCRUDController.java        # CRUD des utilisateurs

‚îú‚îÄ‚îÄ üìÅ customExceptions              # Gestion des exceptions personnalis√©es
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ orders
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìù OrderCreationException.java     # Exception sp√©cifique √† la cr√©ation d'une commande
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ users
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìù DaoException.java               # Exception g√©n√©rique DAO c√¥t√© utilisateurs
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìù UsersServiceException.java      # Exception niveau service utilisateurs

‚îú‚îÄ‚îÄ üìÅ dao                           # DAO : acc√®s direct √† la base de donn√©es
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ deliveryAddress
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìù DeliveryAddressDAO.java
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ orderedItem
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìù OrderedItemDAO.java
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ orders
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìù OrderAnalyticsDAO.java         # Requ√™tes analytiques
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìù OrderDAO.java                  # CRUD commandes
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ products
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìù ProductDAO.java
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ roles
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìù RolesDao.java
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ users
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìù UsersDAO.java
‚îÇ 

‚îú‚îÄ‚îÄ üìÅ dto.views                    # DTOs pour les vues sp√©cifiques (ex : r√©sum√©s, statistiques)
‚îÇ   ‚îú‚îÄ‚îÄ üìù OrderSummaryDTO.java

‚îú‚îÄ‚îÄ üìÅ model                        # Entit√©s m√©tier (donn√©es persist√©es)
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ builder
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìù ProductBuilder.java         # Cr√©ation de produits via un builder
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìù UsersBuilder.java           # Cr√©ation d‚Äôutilisateurs via un builder
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ deliveryAddressClass
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìù DeliveryAddress.java
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ orderedItemClass
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìù OrderedItem.java
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ ordersClass
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìù Order.java
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ productsClass
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìù Product.java
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ rolesClass
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìù Roles.java
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ usersClass
‚îÇ       ‚îú‚îÄ‚îÄ üìù CustomUserDetails.java       # Impl√©mentation UserDetails pour Spring Security
‚îÇ       ‚îú‚îÄ‚îÄ üìù Users.java

‚îú‚îÄ‚îÄ üìÅ service                      # Logique m√©tier (business layer)
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ deliveryAddress
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìù DeliveryAddressService.java
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ orders
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìù OrderAnalyticsService.java
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìù OrderService.java
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ products
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìù ProductService.java
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ roles
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìù RolesService.java
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ users
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìù UsersService.java
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìù UsersStatsService.java
‚îÇ 

‚îú‚îÄ‚îÄ üìÅ utils                        # Fonctions utilitaires
‚îÇ   ‚îú‚îÄ‚îÄ üìù PasswordEncoderUtils.java       # Encodage BCrypt
‚îÇ   ‚îú‚îÄ‚îÄ üìù SwaggerConfig.java              # Configuration de la doc Swagger

‚îú‚îÄ‚îÄ üìù GsbEcommerceBackendApplication.java # Point d‚Äôentr√©e de l‚Äôapplication Spring Boot

‚îú‚îÄ‚îÄ üìÅ resources
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ static                          # Contenu statique (images, JS, CSS...)
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ templates                       # Templates Thymeleaf (si besoin)
‚îÇ   ‚îú‚îÄ‚îÄ üìù application.yaml                # Configuration principale
‚îÇ   ‚îú‚îÄ‚îÄ üìù application-test.yaml           # Config sp√©cifique aux tests
‚îÇ   ‚îú‚îÄ‚îÄ üìù data.sql                        # Donn√©es d'exemple pour l'initialisation
‚îÇ   ‚îú‚îÄ‚îÄ üìù schema.sql                      # Cr√©ation du sch√©ma (si utilis√©e)
‚îÇ   ‚îú‚îÄ‚îÄ üìù views.sql                       # Script SQL pour cr√©er les vues

‚îú‚îÄ‚îÄ üìÅ test
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ dao
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìù OrderDAOTest.java           # Tests unitaires du DAO commandes
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìù OrderedItemDAOTest.java     # Tests unitaires du DAO des articles command√©s
‚îÇ   ‚îú‚îÄ‚îÄ üìù GsbEcommerceBackendApplicationTests.java # Tests d‚Äôint√©gration de l‚Äôapplication

```
---
## **‚òï Pr√©requis**

- **Java 17+** : Le projet est bas√© sur Spring Boot 3.x, n√©cessitant Java 17 ou une version sup√©rieure.
- **MySQL** : Base de donn√©es utilis√©e pour stocker les donn√©es des utilisateurs et des produits.
- **mysql-connector** : D√©pendance pr√©sente dans le fichier pom.xml. Ce pilote est n√©cessaire pour permettre la communication avec la DB
- **Maven** : Gestionnaire de d√©pendances.

---
## **üìú Installation**

1. **‚öôÔ∏è Clonez le projet :**
   ```bash
   git clone https://github.com/CyrilUO/GSB-ECOMMERCE-BACKEND.git
   cd gsbEcommerceBackend
   
2. **üõ¢Ô∏è Configurez votre base de donn√©es MySQL**

- Jouez dans l'ordre les scripts situ√©s dans *src / main / ressources*
  - schema.sql   -- cr√©e les tables
  - views.sql    -- cr√©e les vues SQL personnalis√©es
  - data.sql     -- ins√®re des donn√©es initiales

3. **üîëÔ∏è Configurez la connexion √† la base**
    ```bash
    spring:
     datasource:
       url: jdbc:mysql://localhost:3306/gsb_db_ecommerce
       username: root
       password: root
       driver-class-name: com.mysql.cj.jdbc.Driver

4. **üöÄ Configurez la clef JWT**
- Au lancement de l'application, une cl√© base64 sera g√©n√©r√©e automatiquement dans la console (via JwtKeyGeneratorUtils) 
- Inserez-l√† dans sa variable Secret ou dans un fichier .env authentication>service>jwtservice
- Si cela ne marche pas du √† la n√©c√©ssit√© d'avoir une cl√© avant la compilation, vous pouvez run ce script pour obtenir une clef (Python)
    ```bash
    import secrets
    import base64
    
    raw_key = secrets.token_bytes(32)
    
    b64_key = base64.b64encode(raw_key).decode('utf-8')
    
    print("Cl√© brute :", raw_key)
    print("Cl√© base64 :", b64_key)

    ```
- Ou en java 
    ```bash 
    import java.security.SecureRandom;
    import java.util.Base64;
    
    public class SecretKeyGenerator {
    
        public static void main(String[] args) {
            byte[] key = new byte[32];
    
            SecureRandom secureRandom = new SecureRandom();
            secureRandom.nextBytes(key);
    
            String base64Key = Base64.getEncoder().encodeToString(key);
    
            System.out.println("Cl√©  : " + base64Key);
        }
    }
    ```

5. **Lancez l'app**

   ```bash 
   mvn spring-boot:run
   
6. **üêã Optionnel : Docker (non fonctionnel pour le moment)
   **
   ```bash
   docker-compose up --build

7. **‚ôªÔ∏è Clonez la partie front du projet et lire le README associ√©**
    ```bash
    git clone https://github.com/CyrilUO/GSB-ECOMMERCE-FRONT
---
## **Fonctionnalit√©s**

1. **Gestion des Utilisateurs**
    - üë§ Cr√©er, modifier et supprimer des utilisateurs.
    - üîê Authentification via des tokens JWT *(optionnel si Spring Security est impl√©ment√©)*.

2. **Gestion des Produits**
    - üì¶ Ajouter, modifier et supprimer des produits.

3. **S√©curit√©** 
    - üîí Mise en place de JWT pour l'authentification et la s√©curisation des endpoints.
    - üåê Configuration CORS pour accepter les requ√™tes du frontend *(Vue.js)*.

4. **Gestion du panier et commandes**

5. **Analyses des donn√©es employ√©s** 

---

## **üì¨ Endpoints API Principaux**
1. **Authentification**
> ‚û°Ô∏è /api/auth/login
2. **Utilisateurs**  
> ‚û°Ô∏è /api/users/**
3. **Produits** 
> ‚û°Ô∏è /api/products/**
4. **Commandes**
> ‚û°Ô∏è /api/orders/**
5. **Adresses**
> ‚û°Ô∏è /api/delivery-address/**
6. **Roles**
> /api/roles/** 

**Visualiser l'ensemble des endpoints sur Swagger**
> http://localhost:8080/swagger-ui/index.html

--- 

## **üß™ Tests**
```
--------------------------------
           mvn test:run                    
--------------------------------
mvn -Dmaven.surefire.debug test 
--------------------------------